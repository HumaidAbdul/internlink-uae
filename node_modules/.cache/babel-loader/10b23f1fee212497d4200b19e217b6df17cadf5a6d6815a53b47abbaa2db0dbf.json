{"ast":null,"code":"// src/pages/ApplicationDetails.jsx\nimport React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import api from\"../lib/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ApplicationDetails(){const{id}=useParams();const navigate=useNavigate();const[app,setApp]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{(async()=>{try{// ✅ مهم: نستخدم /api/admin/applications/:id\nconst res=await api.get(\"/api/admin/applications/\".concat(id));setApp(res.data||res);}catch(err){var _err$response,_err$response$data;console.error(\"Error loading application:\",err);toast.error((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to load application.\");}finally{setLoading(false);}})();},[id]);const handleBack=()=>{// يرجع لصفحة الديركتوري\nnavigate(\"/admin/directory\");};if(loading)return/*#__PURE__*/_jsx(\"p\",{style:{padding:16},children:\"Loading\\u2026\"});if(!app){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:16},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Application not found.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBack,children:\"Back\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:900,margin:\"24px auto\",padding:\"0 16px\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:24},children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:0},children:\"Application Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBack,style:{padding:\"8px 16px\",borderRadius:999,border:\"1px solid #e5e7eb\",background:\"#fff\",cursor:\"pointer\"},children:\"Back to Directory\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#fff\",borderRadius:16,padding:20,boxShadow:\"0 12px 30px rgba(0,0,0,0.06)\",border:\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:20},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Student\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),app.student_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email: \"}),app.student_email]})]}),/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:20},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Internship\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Title: \"}),app.internship_title||app.title]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location: \"}),app.internship_location||app.location]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Company: \"}),app.company_name]})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Application\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status: \"}),app.status]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Applied at: \"}),app.applied_at?new Date(app.applied_at).toLocaleDateString():\"-\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rejection reason: \"}),app.rejection_reason||\"-\"]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","toast","api","jsx","_jsx","jsxs","_jsxs","ApplicationDetails","id","navigate","app","setApp","loading","setLoading","res","get","concat","data","err","_err$response","_err$response$data","console","error","response","message","handleBack","style","padding","children","onClick","maxWidth","margin","display","justifyContent","alignItems","marginBottom","borderRadius","border","background","cursor","boxShadow","student_name","student_email","internship_title","title","internship_location","location","company_name","status","applied_at","Date","toLocaleDateString","rejection_reason"],"sources":["C:/Users/humai/Downloads/internlink-uaeA/internlink-uae/frontend/src/pages/ApplicationDetails.jsx"],"sourcesContent":["// src/pages/ApplicationDetails.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport api from \"../lib/api\";\r\n\r\nexport default function ApplicationDetails() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [app, setApp] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        // ✅ مهم: نستخدم /api/admin/applications/:id\r\n        const res = await api.get(`/api/admin/applications/${id}`);\r\n        setApp(res.data || res);\r\n      } catch (err) {\r\n        console.error(\"Error loading application:\", err);\r\n        toast.error(\r\n          err?.response?.data?.message || \"Failed to load application.\"\r\n        );\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [id]);\r\n\r\n  const handleBack = () => {\r\n    // يرجع لصفحة الديركتوري\r\n    navigate(\"/admin/directory\");\r\n  };\r\n\r\n  if (loading) return <p style={{ padding: 16 }}>Loading…</p>;\r\n\r\n  if (!app) {\r\n    return (\r\n      <div style={{ padding: 16 }}>\r\n        <p>Application not found.</p>\r\n        <button onClick={handleBack}>Back</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ maxWidth: 900, margin: \"24px auto\", padding: \"0 16px\" }}>\r\n      {/* هيدر */}\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          marginBottom: 24,\r\n        }}\r\n      >\r\n        <h1 style={{ margin: 0 }}>Application Details</h1>\r\n        <button\r\n          onClick={handleBack}\r\n          style={{\r\n            padding: \"8px 16px\",\r\n            borderRadius: 999,\r\n            border: \"1px solid #e5e7eb\",\r\n            background: \"#fff\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          Back to Directory\r\n        </button>\r\n      </div>\r\n\r\n      {/* كارد التفاصيل */}\r\n      <div\r\n        style={{\r\n          background: \"#fff\",\r\n          borderRadius: 16,\r\n          padding: 20,\r\n          boxShadow: \"0 12px 30px rgba(0,0,0,0.06)\",\r\n          border: \"1px solid #e5e7eb\",\r\n        }}\r\n      >\r\n        {/* الطالب */}\r\n        <section style={{ marginBottom: 20 }}>\r\n          <h3>Student</h3>\r\n          <p>\r\n            <strong>Name: </strong>\r\n            {app.student_name}\r\n          </p>\r\n          <p>\r\n            <strong>Email: </strong>\r\n            {app.student_email}\r\n          </p>\r\n        </section>\r\n\r\n        {/* الشركة + الانترنشب */}\r\n        <section style={{ marginBottom: 20 }}>\r\n          <h3>Internship</h3>\r\n          <p>\r\n            <strong>Title: </strong>\r\n            {app.internship_title || app.title}\r\n          </p>\r\n          <p>\r\n            <strong>Location: </strong>\r\n            {app.internship_location || app.location}\r\n          </p>\r\n          <p>\r\n            <strong>Company: </strong>\r\n            {app.company_name}\r\n          </p>\r\n        </section>\r\n\r\n        {/* حالة الأبلكيشن */}\r\n        <section>\r\n          <h3>Application</h3>\r\n          <p>\r\n            <strong>Status: </strong>\r\n            {app.status}\r\n          </p>\r\n          <p>\r\n            <strong>Applied at: </strong>\r\n            {app.applied_at\r\n              ? new Date(app.applied_at).toLocaleDateString()\r\n              : \"-\"}\r\n          </p>\r\n          <p>\r\n            <strong>Rejection reason: </strong>\r\n            {app.rejection_reason || \"-\"}\r\n          </p>\r\n        </section>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}